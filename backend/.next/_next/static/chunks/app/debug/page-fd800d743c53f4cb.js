(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{19433:(e,t,n)=>{"use strict";n.d(t,{$G:()=>o,cn:()=>r});var s=n(52596),a=n(39688);function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.QP)((0,s.$)(t))}function o(e,t){let n={english:{aqa:"- Focus on the use of language, structure and form\n- Evaluate the writer's methods and intentions\n- Consider the social, historical and literary context\n- Reference the text with specific quotations\n- Assessment Objectives: AO1 (ideas & language), AO2 (analysis), AO3 (context), AO4 (evaluation)",edexcel:"- Analyze how writers use language and structure to achieve effects\n- Comment on the influence of contextual factors\n- Use subject terminology accurately\n- Support points with precise references to the text",ocr:"- Evaluate writers' choices of language, form and structure\n- Consider the impact on readers\n- Demonstrate understanding of context\n- Use a range of appropriate terminology",wjec:"- Analyze how meanings are shaped through language, form and structure\n- Show understanding of the relationship between texts and contexts\n- Use relevant terminology\n- Support interpretations with specific references"},maths:{general:"- Check for correct application of mathematical procedures\n- Evaluate the clarity of working out\n- Consider alternative methods/solutions\n- Award method marks for correct approaches even with calculation errors\n- Check final answers for accuracy and appropriate rounding"},science:{general:"- Look for scientific accuracy in explanations\n- Check for proper use of technical terminology\n- Consider experimental design quality\n- Evaluate analytical reasoning and critical thinking\n- Assess understanding of scientific principles"},history:{general:"- Evaluate the use of historical evidence\n- Consider different historical interpretations\n- Assess understanding of key historical concepts\n- Look for chronological understanding\n- Check for balanced argumentation"},geography:{general:"- Check for understanding of physical and human processes\n- Evaluate use of geographical data and case studies\n- Consider sustainability and interconnection concepts\n- Assess the quality of geographical analysis\n- Look for appropriate use of maps and diagrams"},computerScience:{general:"- Evaluate understanding of computing principles\n- Check for logical problem-solving approaches\n- Assess code quality and algorithm efficiency\n- Consider practical application of theoretical concepts\n- Look for critical understanding of computing systems"},businessStudies:{general:"- Check understanding of business concepts and theories\n- Evaluate analytical and critical thinking\n- Assess application to real business contexts\n- Consider different stakeholder perspectives\n- Look for balanced evaluation of business decisions"}};return n[e]&&n[e][t]?n[e][t]:n[e]&&n[e].general?n[e].general:"- Focus on accurate subject knowledge\n- Consider structure and clarity of response\n- Look for relevant examples and evidence\n- Assess depth of analysis and evaluation\n- Check for appropriate subject-specific terminology"}},34964:(e,t,n)=>{"use strict";n.d(t,{Xi:()=>l,av:()=>d,j7:()=>c,tU:()=>i});var s=n(95155),a=n(12115),r=n(60704),o=n(19433);let i=r.bL,c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.B8,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...a})});c.displayName=r.B8.displayName;let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.l9,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...a})});l.displayName=r.l9.displayName;let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.UC,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...a})});d.displayName=r.UC.displayName},39903:(e,t,n)=>{Promise.resolve().then(n.bind(n,57821))},57821:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var s=n(95155),a=n(12115),r=n(97168),o=n(88482),i=n(88145),c=n(34964),l=n(51154),d=n(53904),u=n(43453),h=n(1243),m=n(56671),f=n(86653);let g="https://beenycool-github-io.onrender.com";function p(){let[e,t]=(0,a.useState)("checking"),[n,p]=(0,a.useState)(null),[x,v]=(0,a.useState)("api-status"),[b,k]=(0,a.useState)(!1),{checkBackendStatus:w}=(0,f.Q)(g),y=async()=>{console.log("=== API STATUS CHECK STARTED ==="),console.log("Backend URL:",g),k(!0);try{let e=await w();if(e?t(e.ok?"online":e.status||"error"):t("error"),p(new Date().toLocaleTimeString()),!e||!e.ok)throw Error("Backend connection error: ".concat((null==e?void 0:e.error)||"Unknown error"));m.oR.info("Checking API health...");let n=await fetch("".concat(g,"/api/health"),{method:"GET",mode:"cors"}).catch(e=>{throw console.error("Health check failed:",e),Error("Health check failed: ".concat(e instanceof Error?e.message:"Unknown error"))});if(console.log("Health response status:",n.status,n.statusText),!n.ok)throw Error("API health check failed with status ".concat(n.status));let s=await n.json().catch(()=>({}));console.log("Health data:",s),m.oR.info("Checking available models...");let a=await fetch("".concat(g,"/api/models"),{method:"GET",mode:"cors"}).catch(e=>{throw console.error("Models check failed:",e),Error("Models check failed: ".concat(e instanceof Error?e.message:"Unknown error"))});if(console.log("Models response status:",a.status,a.statusText),!a.ok)throw Error("API models check failed with status ".concat(a.status));let r=await a.json().catch(()=>({}));console.log("Available models:",r);let o="âœ… API is online\n\uD83D\uDD0C Connection: ".concat(s.status||"Unknown","\n\uD83D\uDD04 Version: ").concat(s.version||"Unknown");r&&r.data&&(o+="\n\uD83E\uDD16 Models: ".concat(r.data.length||0," available")),m.oR.success(o,{duration:5e3})}catch(e){console.error("API status check error:",e),t("error"),m.oR.error("API Status Check Failed: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{console.log("=== API STATUS CHECK COMPLETED ==="),k(!1)}},j=async()=>{k(!0);let e="Explain how the writer uses language features to create an atmosphere of tension in this extract.",t="english";console.log("=== TEST MARK SCHEME GENERATION STARTED ==="),console.log("Question:",e),console.log("Subject:",t),console.log("Exam board:","aqa"),console.log("Backend URL:",g),m.oR.info("Testing mark scheme generation...");let n="Create a mark scheme for this GCSE ".concat(t,' question: "').concat(e,'"');console.log("Using simplified test prompt:",n);try{let e,t=await fetch("".concat(g,"/api/health"));if(console.log("API health check response:",t.status,await t.text()),200!==t.status)throw Error("API health check failed with status ".concat(t.status));console.log("Health check successful, proceeding with mark scheme test");let s=await fetch("".concat(g,"/api/chat/completions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"gemini-2.5-flash-preview-05-20",messages:[{role:"user",content:n}],max_tokens:1500})}),a=await s.clone().text();if(console.log("Test response status:",s.status),console.log("Test response raw:",a),!s.ok){let e="Unknown error";try{let t=JSON.parse(a);e=JSON.stringify(t),console.error("Test response error:",e)}catch(t){t instanceof Error&&console.error("Parse error:",t.message),e=a||s.statusText,console.error("Test response error (text):",e)}throw Error("API request failed: ".concat(s.status,". ").concat(e))}try{e=JSON.parse(a),console.log("Test response parsed successfully:",e)}catch(e){if(e instanceof Error)throw console.error("Failed to parse response as JSON:",e.message),Error("Failed to parse API response as JSON: ".concat(e.message));throw Error("Failed to parse API response as JSON")}let r="";e.content?r=e.content:e.choices&&e.choices[0]&&e.choices[0].message?r=e.choices[0].message.content:e.text||e.answer||e.response?r=e.text||e.answer||e.response:"string"==typeof e?r=e:(console.log("Unknown response format:",e),r="Failed to extract proper content. Raw response: "+JSON.stringify(e)),m.oR.success("Mark scheme generated successfully!"),console.log("Extracted mark scheme content (first 100 chars):",r.substring(0,100)+"...")}catch(e){console.error("Test mark scheme generation error:",e),m.oR.error("Test mark scheme generation failed: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{console.log("=== TEST MARK SCHEME GENERATION COMPLETED ==="),k(!1)}};return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,s.jsxs)(o.Zp,{className:"mb-6",children:[(0,s.jsx)(o.aR,{children:(0,s.jsxs)(o.ZB,{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:"Debug Console"}),(0,s.jsx)(i.E,{variant:"online"===e?"default":"destructive",className:"online"===e?"bg-green-500":"",children:e})]})}),(0,s.jsxs)(o.Wu,{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"This page contains debugging tools for the AI GCSE Marker application. Use these tools to verify backend connectivity and API functionality."}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"Backend URL:"})," ",g,n&&(0,s.jsxs)("span",{className:"ml-2 text-xs text-muted-foreground",children:["Last checked: ",n]})]}),(0,s.jsxs)(r.$,{variant:"outline",size:"sm",onClick:y,disabled:b,children:[b?(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Check Status"]})]}),(0,s.jsxs)(c.tU,{value:x,onValueChange:v,className:"w-full",children:[(0,s.jsxs)(c.j7,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(c.Xi,{value:"api-status",children:"API Status"}),(0,s.jsx)(c.Xi,{value:"mark-scheme-test",children:"Mark Scheme Test"})]}),(0,s.jsx)(c.av,{value:"api-status",className:"p-4 border rounded-md mt-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-3 w-3 rounded-full mr-2 ".concat("online"===e?"bg-green-500":"checking"===e?"bg-yellow-500":"bg-red-500")}),(0,s.jsxs)("span",{className:"font-medium",children:["Backend Status: ",e.charAt(0).toUpperCase()+e.slice(1)]})]}),(0,s.jsxs)("div",{className:"p-3 bg-muted rounded-md",children:[(0,s.jsx)("h3",{className:"font-medium mb-2",children:"Connection Information"}),(0,s.jsx)("pre",{className:"text-xs bg-card p-2 rounded overflow-auto",children:JSON.stringify({url:g,status:e,lastChecked:n,environment:window.location.hostname},null,2)})]}),(0,s.jsx)("div",{className:"flex items-center",children:"online"===e?(0,s.jsxs)("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[(0,s.jsx)(u.A,{className:"mr-2 h-5 w-5"}),(0,s.jsx)("span",{children:"Backend is online and ready to use"})]}):(0,s.jsxs)("div",{className:"flex items-center text-amber-600 dark:text-amber-400",children:[(0,s.jsx)(h.A,{className:"mr-2 h-5 w-5"}),(0,s.jsx)("span",{children:"checking"===e?"Checking backend status...":"Backend is offline or experiencing issues"})]})})]})}),(0,s.jsx)(c.av,{value:"mark-scheme-test",className:"p-4 border rounded-md mt-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm",children:"Test the mark scheme generation functionality by clicking the button below. This will send a sample question to the API and verify the response."}),(0,s.jsxs)("div",{className:"p-3 bg-muted rounded-md",children:[(0,s.jsx)("h3",{className:"font-medium mb-2",children:"Test Parameters"}),(0,s.jsx)("pre",{className:"text-xs bg-card p-2 rounded overflow-auto",children:JSON.stringify({question:"Explain how the writer uses language features to create an atmosphere of tension in this extract.",subject:"english",examBoard:"aqa",model:"gemini-2.5-flash-preview-05-20"},null,2)})]}),(0,s.jsx)(r.$,{onClick:j,disabled:b||"online"!==e,className:"w-full",children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Testing..."]}):"Test Mark Scheme Generation"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Results will be displayed in the browser console and as toast notifications."})]})})]})]})]}),(0,s.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:(0,s.jsx)("p",{children:"Debug page for GCSE AI Marker application"})})]})}},86653:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i,h:()=>o});var s=n(12115),a=n(54052),r=n.n(a);let o=(e,t)=>{let n=(0,s.useCallback)(async t=>{if(!t||t.length<20)return null;try{for(let[n,s]of Object.entries(e))for(let e of s)if(t.toLowerCase().includes(e.toLowerCase()))return n;return null}catch(e){return console.error("Subject classification error:",e),null}},[e]),a=(0,s.useRef)(null);return(0,s.useEffect)(()=>(a.current=r()(async(e,s,a,r,o,i,c)=>{if(t)return;let l=await n(e);if(l&&l!==s&&!a.current){var d,u;let e=(null==(d=r.find(e=>e.value===s))?void 0:d.label)||"",t=(null==(u=r.find(e=>e.value===l))?void 0:u.label)||"";o(l),i(l),c({message:"Subject automatically detected as ".concat(t),detail:e?"Changed from ".concat(e):null,icon:"detection"}),setTimeout(()=>c(null),3e3)}},1e3),()=>{a.current&&a.current.cancel()}),[n,t,e]),{classifySubjectAI:n,debouncedClassifySubject:(0,s.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(a.current)return a.current(...t)},[])}},i=e=>({checkBackendStatus:(0,s.useCallback)(async t=>{try{if(window.location.hostname.includes("github.io")||"beenycool.github.io"===window.location.hostname){console.log("Running on GitHub Pages - simulating online status for UI rendering");try{window.localStorage.setItem("USE_LOCAL_API","true")}catch(e){console.warn("Failed to set up local API fallbacks:",e)}return window.BACKEND_STATUS={status:"online",lastChecked:new Date().toLocaleTimeString(),isGitHubPages:!0,usingLocalFallbacks:!0},{ok:!0,data:{status:"ok",openaiClient:!0,apiKeyConfigured:!0,isGitHubPages:!0,usingLocalFallbacks:!0},status:"online"}}let n=0;for(;n<=3;)try{let n=new AbortController,s=setTimeout(()=>n.abort(),12e3),a=window.location.hostname.includes("github.io")||"beenycool.github.io"===window.location.hostname?"".concat(e,"/health"):window.constructApiUrl?window.constructApiUrl("health"):"".concat(e,"/api/health");console.log("Checking backend health at ".concat(a));let r=await fetch("".concat(a,"?timestamp=").concat(Date.now()),{method:"GET",signal:n.signal,mode:"cors",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(clearTimeout(s),!r.ok){if(404===r.status)return console.warn("Backend health check returned 404. Simulating success for UI rendering."),{ok:!0,data:{status:"ok",openaiClient:!0,apiKeyConfigured:!0,simulated404:!0},status:"online"};throw Error("Backend health check failed: ".concat(r.status))}let o=await r.json();if(console.log("Backend health check data:",o),!0!==o.openaiClient||!0!==o.apiKeyConfigured)return{ok:!1,error:"The backend API service is not properly configured. Please try again later.",status:"error",data:o};if(t&&"gemini-2.5-flash-preview-05-20"===t&&!0===o.rateLimited)return{ok:!1,error:"Gemini 2.5 Flash Preview is rate limited. Please try again in a minute or choose another model.",status:"rate_limited",data:o};return{ok:!0,data:o,status:"online"}}catch(t){if(3===n)throw t;let e=2e3*(n+1);console.log("Retry attempt ".concat(n+1," for backend health check in ").concat(e,"ms")),await new Promise(t=>setTimeout(t,e)),n++}}catch(n){console.error("Backend health check failed:",n);let e=n.message,t="error";return"AbortError"===n.name||"TimeoutError"===n.name?e="Backend did not respond in time. The server may take up to 50 seconds to wake up.":(n.message.includes("Failed to fetch")||n.message.includes("NetworkError"))&&(e="Network connection to backend failed. Please check your internet connection and try again in a moment.",t="network"),{ok:!1,error:e,status:t}}},[e])})},88145:(e,t,n)=>{"use strict";n.d(t,{E:()=>i});var s=n(95155);n(12115);var a=n(74466),r=n(19433);let o=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:n,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)(o({variant:n}),t),...a})}},88482:(e,t,n)=>{"use strict";n.d(t,{BT:()=>c,Wu:()=>l,ZB:()=>i,Zp:()=>r,aR:()=>o,wL:()=>d});var s=n(95155);n(12115);var a=n(19433);function r(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...n})}function o(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...n})}function i(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...n})}function c(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...n})}function l(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...n})}function d(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",t),...n})}},97168:(e,t,n)=>{"use strict";n.d(t,{$:()=>c});var s=n(95155);n(12115);var a=n(99708),r=n(74466),o=n(19433);let i=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:n,size:r,asChild:c=!1,...l}=e,d=c?a.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,o.cn)(i({variant:n,size:r,className:t})),...l})}}},e=>{var t=t=>e(e.s=t);e.O(0,[744,451,315,358],()=>t(39903)),_N_E=e.O()}]);